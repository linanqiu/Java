package org.javaiw.main;

import java.util.Date;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistryBuilder;
import org.javaiw.model.Product;
import org.javaiw.model.Vendor;

public class HibMain {

	public static void main(String[] args) {
		Configuration configuration = new Configuration();
	    configuration.configure();
	    org.hibernate.service.ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(
	            configuration.getProperties()). buildServiceRegistry();
	    
		SessionFactory factory=configuration.buildSessionFactory(serviceRegistry);
		Session session=factory.openSession();
		session.beginTransaction();
		Product p1=new Product(1, "ABDSS", "WZSS", 5422);
		Product p11=new Product(2, "ABD", "WZS", 5422);
		Vendor v1=new Vendor("Kaluram","Kalu@s.com");
		Vendor v11=new Vendor("Kalu","Kal@s.com");
		p1.getVendors().add(v1);
		p1.getVendors().add(v11);
		p11.getVendors().add(v11);
		session.save(p1);
		session.save(p11);
		session.save(v1);
		session.save(v11);
		session.getTransaction().commit();
		session.close();
	}

}
